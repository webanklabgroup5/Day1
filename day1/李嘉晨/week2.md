# 第二周周报

## build_chain脚本分析

* [build_chain分析](./build_chain分析.md)
* 了解整个脚本执行流程
	* 检查环境
	* 分析参数
	* main
		* 检查ip是否填写，使用
		* 检查旧输出文件（存在则报错），创建输出目录
		* 未指定版本则获取最新版本fisco
		* 非docker模式下需指定二进制文件路径和OS参数
		* 检查CA证书文件是否存在，不存在则新建
		* 检查是否处于国密模式，是则生成国密证书
		* 生成机构私钥和证书，给每个节点生成私钥和证书
		* 给每个节点生成配置文件
		* 删除旧日志文件
	* 打印输出
* 理解证书生成流程
	* 生成链证书--联盟委员会
		* 请求私钥`ca.key` 2048位的RSA
		* 生成链证书`ca.crt` 用RSA创建的自签署的CA证书，x509格式
	* 生成机构证书--机构
		* 请求私钥`agency.key` 2048为的RSA
		* 使用私钥得到证书请求文件`agency.csr`发送给联盟委员会
		* 委员会使用私钥`ca.key`，根据机构证书请求文件`agency.csr`生成机构证书`agency.crt`发送给机构
	* 生成节点证书
		* 生成私钥`node.key` 请求文件`node.csr`
		* 机构管理员使用私钥`agency.key`，根据`node.csr`为节点/sdk颁发证书`node.crt`